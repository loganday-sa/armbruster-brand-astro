---
import { getCollection } from 'astro:content';
import CategoryList from '../../layouts/CategoryList.astro';
import { CATEGORIES, POSTS_PER_PAGE } from '../../consts';

const category = CATEGORIES['Implementation'];
const allPosts = (await getCollection('blog'))
	.filter((post) => !post.data.draft && post.data.category === 'Implementation')
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const totalPosts = allPosts.length;
const totalPages = Math.ceil(totalPosts / POSTS_PER_PAGE);
const posts = allPosts.slice(0, POSTS_PER_PAGE);
---

<CategoryList
	posts={posts}
	category={category}
	currentPage={1}
	totalPages={totalPages}
	baseUrl="/implementation/"
	totalPosts={totalPosts}
/>
